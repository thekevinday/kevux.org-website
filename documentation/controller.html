<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Documentation - Controller</title>

    <base href="../">

    <meta charset="UTF-8">
    <meta name="author" content="Kevin Day">
    <meta name="description" content="Controller program documentation.">
    <meta name="keywords" content="Kevin Day, Kevux, FLL, Featureless, Linux, Library, Controller, Open-Source">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link type="text/css" rel="stylesheet" media="all" href="css/kevux.css">
    <link type="text/css" rel="stylesheet" media="only screen" href="css/kevux-screen.css">
    <link type="text/css" rel="stylesheet" media="only screen and (min-device-width:501px)" href="css/kevux-screen-desktop.css">
    <link type="text/css" rel="stylesheet" media="only screen and (max-device-width:500px)" href="css/kevux-screen-mobile.css">
    <link type="text/css" rel="stylesheet" media="only screen and (min-device-width:1201px)" href="css/kevux-screen-large.css">
    <link type="text/css" rel="stylesheet" media="only screen and (min-device-width:501px) and (max-device-width:1200px)" href="css/kevux-screen-normal.css">
    <link type="text/css" rel="stylesheet" media="only screen and (min-device-width:251px) and (max-device-width:500px)" href="css/kevux-screen-small.css">
    <link type="text/css" rel="stylesheet" media="only screen and (max-device-width:250px)" href="css/kevux-screen-tiny.css">
    <link type="text/css" rel="stylesheet" media="only print" href="css/kevux-print.css">
    <link type="text/css" rel="stylesheet" media="only print and (orientation:landscape)" href="css/kevux-print-landscape.css">
    <link type="text/css" rel="stylesheet" media="only print and (orientation:portrait)" href="css/kevux-print-portrait.css">

    <link rel="canonical" href="documentation/controller.html">
    <link type="image/x-icon" rel="icon" href="images/kevux.ico">
    <link type="image/x-icon" rel="shortcut" href="images/kevux.ico">
    <link type="text/html" rel="license" href="licenses.html">
  </head>

  <body id="kevux" class="kevux no-js documentation">
    <div role="banner" class="header-block">
      <header class="header-section header">
        <div class="header-site">Kevux Systems and Software</div>
      </header>

      <div class="nav-block">
        <nav id="kevux-site-nav" class="nav-menu">
          <div class="nav-item"><a href="news.html" class="nav-text link">News</a></div>
          <div class="nav-item"><a href="distributions.html" class="nav-text link">Distributions</a></div>
          <div class="nav-item"><a href="fll.html" class="nav-text link">FLL</a></div>
          <div class="nav-item"><a href="projects.html" class="nav-text link">Projects</a></div>
          <div class="nav-item active"><a href="documentation.html" class="nav-text link">Documentation</a></div>
        </nav>
      </div>
    </div>

    <div class="content-block">
      <div id="nav-expanded" class="nav-block">
        <nav id="kevux-document-nav" class="nav-menu">
          <div class="nav-item block back">
            <a href="documentation.html" class="nav-text link back">Back</a>
          </div>
          <div class="nav-item block highlight unlink">
            <div class="nav-text notice">Documentation</div>
            <div class="nav-text unlink">Controller</div>
          </div>
          <div class="nav-item block">
            <a href="documentation/controller.html#parameters-standard" class="nav-text link">Standard Parameters</a>
          </div>
          <div class="nav-item block">
            <a href="documentation/controller.html#parameters-program" class="nav-text link">Program Parameters</a>
          </div>
          <div class="nav-item block">
            <a href="documentation/controller.html#simulate" class="nav-text link">Simulate</a>
          </div>
          <div class="nav-item block">
            <a href="documentation/controller.html#time" class="nav-text link">Time</a>
          </div>
          <div class="nav-item block">
            <div class="nav-text notice">Specifications</div>
            <a href="documentation/controller/specifications.html" class="nav-text link">Controller</a>
          </div>
          <div class="nav-item block">
            <a href="documentation/controller/specifications/action.html" class="nav-text link">Action</a>
          </div>
          <div class="nav-item block">
            <a href="documentation/controller/specifications/entry.html" class="nav-text link">Entry</a>
          </div>
          <div class="nav-item block">
            <a href="documentation/controller/specifications/exit.html" class="nav-text link">Exit</a>
          </div>
          <div class="nav-item block">
            <a href="documentation/controller/specifications/packet.html" class="nav-text link">Packet</a>
          </div>
          <div class="nav-item block">
            <a href="documentation/controller/specifications/rule.html" class="nav-text link">Rule</a>
          </div>
          <div class="nav-item block">
            <div class="nav-text notice">APIs</div>
          </div>
          <div class="nav-item block ellipses">
            <a href="documentation/controller.html#nav-expanded" class="nav-text link open" title="Expand Menu">â€¦</a>
            <a href="documentation/controller.html" class="nav-text link close">Collapse Menu</a>
          </div>
        </nav>
      </div>

      <div role="document" class="main-block">
        <main class="main">
          <header class="section-header header">
            <h1 class="section-title h h1">Controller Documentation</h1>
          </header>

          <div class="main-content">
            <p class="p">
              The <strong class="strong">controller</strong> program is a tool for controller other programs.
            </p>
            <p class="p">
              This tool is designed to configured to perform and execute any tasks given across multiple languages and it also has support for operating as an <strong class="strong">init</strong> program. There are special compile-time configurations needed to make this properly operate as an <strong class="strong">init</strong> program.
            </p>
            <p class="p">
              This tool operates similar to the <strong class="strong">fake</strong> program and can even be seen as an evolution to the <strong class="strong">fake</strong> program. The <strong class="strong">controller</strong> program, however is not a replacement to the <strong class="strong">fake</strong> program as it is more generalized.
            </p>
            <p class="p">
              This tool also provides additional features for making it easierr to test and write controller instructions. These features include partial simulation and validation modes.
            </p>
            <p class="p">
              In partial simulation mode, anything that the <strong class="strong">controller</strong> program has full control over and can simulate is simulated. Actual programs and scripts themselves, therefore, cannot be simulated. However, it may be possible to use an environment variables or similar and pass settings to the called program or script if the called program or script is simulation and testing aware.
            </p>
            <p class="p">
              The validation mode is for making this tool more scriptable. By providing validation, the controller instructions can be validated, in which case a success or failure result is returned and any problems or warnings may be printed to the caller of this tool.
            </p>
            <p class="p">
              This tool is not currently fully functional as an <strong class="strong">init</strong> program replacement because the networking aspects are not yet written or fully hashed out. The <strong class="strong">contol</strong> program is also another key part to the <strong class="strong">contoller</strong> program in getting this to work as an <strong class="strong">init</strong> program. Ideally, once this support is complete, it should be possible to replace init programs, such as <strong class="strong">SystemD</strong>, with the <strong class="strong">controller</strong> program.
            </p>
            <p class="p">
              Further development will be made on this once the <strong class="strong">controller</strong> program is updated. The next development series is planned to focus on networking, which will include support for this.
            </p>
          </div>

          <section id="parameters-standard" class="section">
            <header class="section-header header separate">
              <h2 class="section-title h h2">Standard Parameters</h2>
            </header>

            <div class="section-content">
              <div class="center">
                <table class="table context-parameters">
                  <thead class="head set">
                    <tr class="row">
                      <th class="column">Short</th>
                      <th class="column">Long</th>
                      <th class="column">Description</th>
                    </tr>
                  </thead>

                  <tbody class="body set">
                    <tr class="row">
                      <td class="column"><code class="code">-h</code></td>
                      <td class="column"><code class="code">--help</code></td>
                      <td class="column">Print the help message.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">+d</code></td>
                      <td class="column"><code class="code">++dark</code></td>
                      <td class="column">Output using colors that show up better on dark backgrounds.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">+l</code></td>
                      <td class="column"><code class="code">++light</code></td>
                      <td class="column">Output using colors that show up better on light backgrounds.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">+n</code></td>
                      <td class="column"><code class="code">++no_color</code></td>
                      <td class="column">Do not print using color.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">+Q</code></td>
                      <td class="column"><code class="code">++quiet</code></td>
                      <td class="column">Decrease verbosity, silencing most output.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">+E</code></td>
                      <td class="column"><code class="code">++error</code></td>
                      <td class="column">Decrease verbosity, using only error output.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">+N</code></td>
                      <td class="column"><code class="code">++normal</code></td>
                      <td class="column">Set verbosity to normal.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">+V</code></td>
                      <td class="column"><code class="code">++verbose</code></td>
                      <td class="column">Increase verbosity beyond normal output.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">+D</code></td>
                      <td class="column"><code class="code">++debug</code></td>
                      <td class="column">Enable debugging, significantly increasing verbosity beyond normal output.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">+v</code></td>
                      <td class="column"><code class="code">++version</code></td>
                      <td class="column">Print only the version number.</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p class="p">
                The <code class="code">+Q/++quiet</code> parameter silences all output that is not the intent and purpose of the program. For example, the purpose of the <strong class="strong">utf8</strong> program is to print the Unicode code point or the <abbr title="Unicode Transformation Format 8-bit">UTF-8</abbr> byte code. The <code class="code">+Q/++quiet</code> will not suppress this output. The new line printed at the end of the program, is however, not printed. The <code class="code">+Q/++quiet</code> is ideal for using in scripting to help guarantee more consistent and controlled output.
              </p>
              <p class="p">
                The <code class="code">+N/++no_color</code> simplifies the output to avoid the special color character codes. The special color character codes tend to take up a lot of extra space and may slow down printing performance.
              </p>
            </div>
          </section>

          <section id="parameters-program" class="section">
            <header class="section-header header separate">
              <h2 class="section-title h h2">Program Parameters</h2>
            </header>

            <div class="section-content">
              <div class="center">
                <table class="table context-parameters">
                  <thead class="head set">
                    <tr class="row">
                      <th class="column">Short</th>
                      <th class="column">Long</th>
                      <th class="column">Description</th>
                    </tr>
                  </thead>

                  <tbody class="body set">
                    <tr class="row">
                      <td class="column"><code class="code">-c</code></td>
                      <td class="column"><code class="code">--cgroup</code></td>
                      <td class="column">Specify a custom control group file path, such as '/sys/fs/cgroup/'.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">-d</code></td>
                      <td class="column"><code class="code">--daemon</code></td>
                      <td class="column">Run in daemon only mode (do not process the entry).</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">-I</code></td>
                      <td class="column"><code class="code">--init</code></td>
                      <td class="column">The program will run as an init replacement.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">-i</code></td>
                      <td class="column"><code class="code">--interruptible</code></td>
                      <td class="column">Designate that this program can be interrupted by a signal.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">-p</code></td>
                      <td class="column"><code class="code">--pid</code></td>
                      <td class="column">Specify a custom pid file path, such as 'controller/run/default.pid'.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">-s</code></td>
                      <td class="column"><code class="code">--settings</code></td>
                      <td class="column">Specify a custom settings path, such as 'controller/'.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">-S</code></td>
                      <td class="column"><code class="code">--simulate</code></td>
                      <td class="column">Run as a simulation.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">-k</code></td>
                      <td class="column"><code class="code">--socket</code></td>
                      <td class="column">Specify a custom socket file path, such as 'controller/run/default.socket'.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">-U</code></td>
                      <td class="column"><code class="code">--uninterruptible</code></td>
                      <td class="column">Designate that this program cannot be interrupted by a signal.</td>
                    </tr>
                    <tr class="row">
                      <td class="column"><code class="code">-v</code></td>
                      <td class="column"><code class="code">--validate</code></td>
                      <td class="column">Validate the settings (entry and rules) without running (does not simulate).</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p class="p">
                When both the <code class="code">--simulate</code> parameter and the <code class="code">--validate</code> parameter are specified, then additional information on each would be executed rule is printed but no simulation is performed.
              </p>
              <p class="p">
                The default interrupt behavior is to operate as if the <code class="code">--interruptible</code> parameter is passed.
              </p>
              <p class="p">
                Specify an empty string for the <code class="code">--pid</code> parameter to disable pid file creation for this program.
              </p>
            </div>
          </section>

          <section id="simulate" class="section">
            <header class="section-header header separate">
              <h2 class="section-title h h2">Simulate Documentation</h2>
            </header>

            <div class="section-content">
              <p class="p">
                This describes the intent and purpose of the simulation and validation parameters.
              </p>
              <p class="p">
                The <strong class="strong">controller</strong> program is designed to support being run as an alternative to an <code class="code">init</code> program (such as <code class="code">Sysvinit</code> or <code class="code">SystemD</code>).
                To help prevent problems, simulation and validation functionality is provided.
              </p>
              <ul>
              <li>
                <p class="p">
                  The <code class="code">validate</code> functionality:
                </p>
                <p class="p">
                  By itself will simply check the syntax of the <strong class="strong">Entry</strong> and Rule files (for Rule files specified in the <strong class="strong">Entry</strong> or <strong class="strong">Exit</strong> file).
                  Errors are reported and nothing is executed.
                  The <strong class="strong">controller</strong> program will return 0 on validation success and 1 on validation failure.
                </p>
              </li>

              <li>
                <p class="p">
                  The <code class="code">simulate</code> functionality:
                </p>
                <p class="p">
                  By itself will perform a simulated execution of all Rules designated by an <strong class="strong">Entry</strong> or <strong class="strong">Exit</strong> file.
                  The simulation is not a true simulation in that no program is ever called to perform any operations.
                  Furthermore, any <code class="code">script</code> specified inside a Rule is only simulated as a whole and not its individual parts.
                  Once the <strong class="strong">Entry</strong> file is finished executing, the <code class="code">simulate</code> will continue to run waiting on <strong class="strong">control</strong> commands.
                </p>
              </li>

              <li>
                <p class="p">
                  The <code class="code">simulate</code> with <code class="code">validate</code> functionality:
                </p>
                <p class="p">
                  Will perform similar to <code class="code">validate</code> functionality except that additional information of the Rules to be executed will be printed.
                  There will be neither execution nor simulated execution of any Rule when both <code class="code">simulate</code> and <code class="code">validate</code> are used together.
                </p>
              </li>
              <p class="p">
                When a Rule is simulated, an empty script command (generally defaulting to <code class="code">bash</code>) is executed in place of the actual program being executed for each program or script in the Rule file that is to be executed.
                This allows for testing the designated permissions and other settings that would be applied when calling some program.
                Control Groups are not simulated but are actually created and the simulating process will actually be placed within the Control Group.
              </p>
            </div>
          </section>

          <section id="time" class="section">
            <header class="section-header header separate">
              <h2 class="section-title h h2">Time Documentation</h2>
            </header>

            <div class="section-content">
              <p class="p">
                The <strong class="strong">controller</strong> program utilizes the unit of measurement called a <em class="em">Time</em>, represented with uppercase <em class="em">T</em>.
                For comparison, a unit of <em class="em">Time</em> is equivalent to a nanosecond, or 10^-9 seconds.
                A <em class="em">MegaTime</em> (MT) is therefore equivalent to a millisecond such that a millisecond is 10^-3 seconds.
              </p>
              <p class="p">
                A unit of <em class="em">Time</em> is intended to represent some unit of <em class="em">Time</em> such that a single 64-bit integer may hold all units of <em class="em">Time</em> for a single calendar year.
                This unit of <em class="em">Time</em> does not and must not include Years (unlike <em class="em">Unixtime</em>).
                To convert from <em class="em">Time</em> to <em class="em">Unixtime</em>, one must have a year (which could be assumed to be the current year) and then calculate all of those calendar oddities.
              </p>
              <p class="p">
                A unit of <em class="em">Time</em> by default is assumed to be in <abbr title="Coordinated Universal Time">UTC</abbr>.
              </p>
              <ul>
                <li>1 (Earth) year ~= <code class="code">31536000000000000 Time</code> or <code class="code">31536000 GT (GigaTime)</code>.</li>
                <li>1 (Earth) day = <code class="code">86400000000000 Time</code> or <code class="code">86400 GT (GigaTime)</code>.</li>
                <li>1 (Earth) hour = <code class="code">3600000000000 Time</code> or <code class="code">3600 GT (GigaTime)</code>.</li>
                <li>1 (Earth) minute = <code class="code">60000000000 Time</code> or <code class="code">60 GT (GigaTime)</code>.</li>
                <li>1 (Earth) second = <code class="code">1000000000 Time</code> or <code class="code">1 GT (GigaTime)</code>.</li>
              </ul>
              <p class="p">
                Consequentially, 1 day in units of <em class="em">Time</em> is easily represented as <code class="code">86.4 TT</code> (<em class="em">TeraTime</em>).
              </p>
              <p class="p">
                The <em class="em">Time</em> may be stored in its <code class="code">year string format</code>.
                In this format, a Year may be prepended to the <em class="em">Time</em> followed by a single colon ':' to associate a year with the <em class="em">Time</em>.
                This Year has no minimum or maximum but may not have decimals.
                For example, <code class="code">2020:86400000000000</code> would represent: January 02, 2020 0:00 <abbr title="Coordinated Universal Time">UTC</abbr>.
                For example, <code class="code">2020:86.4 TT</code> would represent: January 02, 2020 0:00 <abbr title="Coordinated Universal Time">UTC</abbr>.
              </p>
              <p class="p">
                A second unit of <em class="em">Time</em>, called <em class="em">EpochTime</em>, works the same way as <em class="em">Time</em> except it represents seconds.
                This unit is designated <code class="code">E</code>.
                The format is similar to <em class="em">Time</em>, except there are two colons: <code class="code">1970::1620874738</code> would represent: May 13, 2021 2:58:58 <abbr title="Coordinated Universal Time">UTC</abbr>.
                When the year is not specified, then this is identical to UNIX Epoch.
              </p>
              <p class="p">
                A unit of <em class="em">EpochTime</em> by default is assumed to be in <abbr title="Coordinated Universal Time">UTC</abbr>.
              </p>
              <ul>
                <li>1 (Earth) year ~= <code class="code">31536000 EpochTime</code> or <code class="code">31.536 GE</code> (<em class="em">GigaEpochTime</em>).</li>
                <li>1 (Earth) day = <code class="code">86400 EpochTime</code></li>
                <li>1 (Earth) hour = <code class="code">3600 EpochTime</code></li>
                <li>1 (Earth) minute = <code class="code">60 EpochTime</code></li>
                <li>1 (Earth) second = <code class="code">1 EpochTime</code></li>
                <li>1 GT (GigaTime) = <code class="code">1 EpochTime</code></li>
              </ul>
              <p class="p">
                Consequentially, 1 day in units of <em class="em">EpochTime</em> is easily represented as <code class="code">86.4 KE</code> (<em class="em">KiloEpochTime</em>).
              </p>
            </div>
          </section>
        </main>
      </div>
    </div>
  </body>
</html>
